@model List<PublicReport>
@{
    ViewData["Title"] = "التقارير السنوية";
}

@section HeaderTitle {
    <h2 class="section">التقارير السنوية</h2>
}

<div class="container py-5 publicReportsContainer" style="direction:rtl">
    <div class="row justify-content-start">
        <div class="col-md-12">
            <p>
                نضع بين أيديكم التقارير السنوية التي توثق إنجازات سخاء، وحجم التبرعات، والمشاريع التي تم تنفيذها خلال كل عام.
                نهدف من خلالها إلى تعزيز الشفافية، ومشاركة أثر مساهماتكم الكريمة في تحقيق رسالتنا الإنسانية.
            </p>
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <div class="filter-box">
                        <form method="get" asp-action="PublicReports" class="d-flex align-items-center">
                            <label for="yearFilter" class="me-2 fw-bold">عرض تقارير عام:</label>
                            <select id="yearFilter" name="year" class="custom-select" onchange="this.form.submit()">
                                <option value="">جميع السنوات</option>
                                @foreach (var year in ViewBag.Years as List<int>)
                                {
                                    if (ViewBag.SelectedYear == year)
                                    {
                                        <option value="@year" selected>@year</option>
                                    }
                                    else
                                    {
                                        <option value="@year">@year</option>
                                    }
                                }
                            </select>
                        </form>
                    </div>
                </div>
                
                <div class="card-body">
                    @if (Model.Count == 0)
                    {
                        <div class="text-center py-5">
                            <i class="fa-solid fa-file-circle-xmark text-muted" style="font-size: 3rem;"></i>
                            <p class="mt-3 text-muted">لا توجد تقارير متاحة للعرض في الوقت الحالي.</p>
                        </div>
                    }
                    else
                    {
                        <div class="reports-list">
                            @foreach (var report in Model)
                            {
                                <div class="report-item">
                                    <div class="d-flex align-items-center">
                                        <div class="report-icon me-3">
                                            <i class="fa-solid fa-file-pdf" style="font-size: 2.5rem; color: #c13e44;"></i>
                                        </div>
                                        <div class="report-details flex-grow-1">
                                            @* <h5 class="mb-1">@report.ReportFileName</h5> *@
                                            <div class="mb-2">تقرير عام @report.ReportYear</div>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <small class="text-muted">تاريخ النشر: @(report.CreatedAt?.ToString("yyyy-MM-dd") ?? "-")</small>
                                                <div>
                                                    <a href="~/documents/reports/@report.FilePath" class="btn btn-sm btn-show" target="_blank">
                                                        <i class="fa-solid fa-eye"></i> عرض
                                                    </a>
                                                    <a href="~/documents/reports/@report.FilePath" class="btn btn-sm btn-success" download>
                                                        <i class="fa-solid fa-download"></i> تحميل
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@* <style> *@
@*     .report-item { *@
@*         background-color: #fff; *@
@*         border-right: 4px solid #405712 !important; *@
@*     } *@
    
@*     .filter-box { *@
@*         background-color: #f8f9fa; *@
@*         padding: 8px 15px; *@
@*         border-radius: 5px; *@
@*     } *@
    
@*     .card-header { *@
@*         border-bottom: 2px solid #405712; *@
@*         padding: 1rem; *@
@*     } *@
    
@*     .custom-select { *@
@*         padding: 0.375rem 2.25rem 0.375rem 0.75rem; *@
@*         font-size: 0.875rem; *@
@*         font-weight: 400; *@
@*         line-height: 1.5; *@
@*         color: #212529; *@
@*         background-color: #fff; *@
@*         background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e"); *@
@*         background-repeat: no-repeat; *@
@*         background-position: right 0.75rem center; *@
@*         background-size: 16px 12px; *@
@*         border: 1px solid #ced4da; *@
@*         border-radius: 0.25rem; *@
@*         appearance: none; *@
@*         min-width: 120px; *@
@*     } *@
    
@*     .custom-select:focus { *@
@*         border-color: #86b7fe; *@
@*         outline: 0; *@
@*         box-shadow: 0 0 0 0.25rem rgba(64, 87, 18, 0.25); *@
@*     } *@
@* </style> *@
